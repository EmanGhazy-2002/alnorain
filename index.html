<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>النورين - منتجات مميزة</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <!-- Google Fonts for Arabic -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400;1,700&family=Cairo:wght@200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <!-- EmailJS -->
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
    ></script>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.9.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js"></script>
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="css/admin.css" />
  </head>

  <body>
    <!-- Header -->
    <header class="header">
      <div class="nav-container">
        <img src="images/logo.png" alt="النورين" class="logo" />
        <div class="cart-icon" id="cartIcon">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-count" id="cartCount">0</span>
        </div>
      </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
      <p>اكتشف مجموعتنا المميزة من التيشيرتات والسجاد والحقائب</p>
    </section>

    <!-- Category Navigation -->
    <section class="category-nav">
      <div class="category-buttons">
        <button class="category-btn active" data-category="all">
          جميع المنتجات
        </button>
        <button class="category-btn" data-category="tshirts">
          تيشيرتات تطريز
        </button>
        <button class="category-btn" data-category="bags">
          حقيبة Tote Bag
        </button>
        <button class="category-btn" data-category="carpets">
          سجادة صلاة صغيرة
        </button>
        <button class="category-btn" data-category="stickers">
          ستيكرات معدن
        </button>
        <button class="category-btn" data-category="accessories">
          مدالية - علاقة للسيارة
        </button>
        <button class="category-btn" data-category="book">فواصل كتب</button>
      </div>
    </section>

    <!-- Products Section -->
    <section class="products-section">
      <div class="products-grid" id="productsGrid">
        <!-- Products will be generated by JavaScript -->
      </div>
    </section>

    <!-- WhatsApp Float Button -->
    <div class="whatsapp-float" onclick="openWhatsApp()">
      <i class="fab fa-whatsapp"></i>
    </div>

    <!-- Cart Sidebar -->
    <div class="cart-overlay" id="cartOverlay" onclick="toggleCart()"></div>
    <div class="cart-sidebar" id="cartSidebar">
      <div class="cart-header">
        <h3>سلة التسوق</h3>
        <button
          onclick="toggleCart()"
          style="
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
          "
        >
          ×
        </button>
      </div>
      <div id="cartItems"></div>
      <div class="cart-total">
        <h3>المجموع: <span id="cartTotal">0 دك</span></h3>
        <button
          class="btn btn-primary"
          style="width: 100%; margin-top: 15px"
          onclick="showOrderForm()"
        >
          إتمام الشراء
        </button>
      </div>
    </div>

    <!-- Order Form Modal -->
    <div id="orderModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeOrderForm()">×</span>
        <h2 class="form-title">إتمام الطلب</h2>

        <!-- Order Items Section -->
        <div class="order-items" id="orderItems">
          <h3 class="order-items-title">المنتجات المطلوبة</h3>
          <div id="orderItemsList">
            <!-- Order items will be populated by JavaScript -->
          </div>
        </div>

        <form id="orderForm">
          <div class="form-group">
            <label for="customer_name">الاسم *</label>
            <input
              type="text"
              id="customer_name"
              name="customer_name"
              required
            />
          </div>

          <div class="form-group">
            <label for="phone_number">رقم التليفون *</label>
            <input type="tel" id="phone_number" name="phone_number" required />
          </div>

          <div class="form-group">
            <label for="governorate">المحافظة *</label>
            <select
              id="governorate"
              name="governorate"
              required
              onchange="updateAreas()"
            >
              <option value="">اختر المحافظة</option>
              <option value="AL-ASIMAH">العاصمة</option>
              <option value="HAWALLY">حولي</option>
              <option value="FARWANIYA">الفروانية</option>
              <option value="MUBARAK AL KABEER">مبارك الكبير</option>
              <option value="AHMADI">الأحمدي</option>
              <option value="JAHRA">الجهراء</option>
              <option value="OTHER AREAS">مناطق أخرى</option>
            </select>
          </div>

          <div class="form-group">
            <label for="area">المنطقة *</label>
            <div class="input-with-icon">
              <input
                type="text"
                id="area"
                name="area"
                required
                autocomplete="off"
                placeholder="ابدأ بكتابة اسم المنطقة..."
              />
              <i class="fas fa-search input-icon"></i>
            </div>
            <div id="areaDropdown" class="area-dropdown"></div>
          </div>

          <div class="form-group">
            <label for="block">القطعة *</label>
            <input type="text" id="block" name="block" required />
          </div>

          <div class="form-group">
            <label for="street">الشارع *</label>
            <input type="text" id="street" name="street" required />
          </div>

          <div class="form-group">
            <label for="avenue"
              >الجادة <span class="optional">(اختياري)</span></label
            >
            <input type="text" id="avenue" name="avenue" />
          </div>

          <div class="form-group">
            <label for="house">المنزل *</label>
            <input type="text" id="house" name="house" required />
          </div>

          <h3 class="additional-info-title">معلومات إضافية</h3>

          <div class="form-group">
            <label for="apartment"
              >الشقة <span class="optional">(اختياري)</span></label
            >
            <input type="text" id="apartment" name="apartment" />
          </div>

          <div class="form-group">
            <label for="floor"
              >الدور <span class="optional">(اختياري)</span></label
            >
            <input type="text" id="floor" name="floor" />
          </div>

          <!-- Delivery Cost Display -->
          <div class="delivery-cost" id="deliveryCost">
            <h4>
              تكلفة التوصيل: <span id="deliveryPrice">يرجى اختيار المنطقة</span>
            </h4>
          </div>

          <div class="payment-notice">
            بعد اتمام الطلب سيتم ارسال رابط الدفع عبر الواتساب
          </div>

          <div class="loading" id="loading">
            <i class="fas fa-spinner fa-spin"></i> جاري إرسال الطلب...
          </div>

          <div class="success-message" id="successMessage">
            تم إرسال طلبك بنجاح! سيتم التواصل معك قريباً.
          </div>

          <div class="error-message" id="errorMessage">
            حدث خطأ في إرسال الطلب. يرجى المحاولة مرة أخرى.
          </div>

          <div class="form-buttons">
            <button type="submit" class="btn btn-primary">إرسال الطلب</button>
            <button
              type="button"
              class="btn btn-cancel"
              onclick="closeOrderForm()"
            >
              إلغاء
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Image Preview Modal -->
    <div id="imageModal" class="modal">
      <div
        class="modal-content"
        style="text-align: center; max-width: 90%; padding: 20px"
      >
        <span
          class="close"
          onclick="closeFullImage()"
          style="top: 10px; left: 10px"
          >×</span
        >
        <img
          id="fullImage"
          style="max-width: 100%; max-height: 80vh; border-radius: 10px"
          alt="Product Image"
        />
        <p
          id="imageCaption"
          style="
            margin-top: 10px;
            font-family: 'Cairo', sans-serif;
            color: #0c4141;
          "
        ></p>
      </div>
    </div>

    <!-- Secret Message -->
    <div
      id="secretMessage"
      style="
        display: none;
        position: fixed;
        top: 20px;
        right: 20px;
        background: #2196f3;
        color: white;
        padding: 15px 20px;
        border-radius: 8px;
        z-index: 1002;
        font-family: 'Cairo', sans-serif;
        box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
      "
    >
      تم اكتشاف الكود السري! 🔓
    </div>

    <!-- JavaScript -->
    <script type="module" src="script.js"></script>
  </body>
</html>
